========================================
ğŸ³ Docker å¿«é€Ÿå‚è€ƒ
========================================

ğŸ“¦ æ¨èçš„éƒ¨ç½²æ–‡ä»¶
========================================

æ–°æ‰‹æ¨è:
  Dockerfile: Dockerfile.fixed
  Compose: docker-compose.simple.yml

ç”Ÿäº§ç¯å¢ƒ:
  Dockerfile: Dockerfile.fixed
  Compose: docker-compose.full.yml

========================================
å¿«é€Ÿå‘½ä»¤
========================================

ä¸€é”®éƒ¨ç½²:
  ./docker-deploy.sh

ç®€å•éƒ¨ç½²ï¼ˆä»…åº”ç”¨ï¼‰:
  docker-compose -f docker-compose.simple.yml up -d

å®Œæ•´éƒ¨ç½²ï¼ˆåº”ç”¨+Redis+Nginxï¼‰:
  docker-compose -f docker-compose.full.yml up -d

æŸ¥çœ‹çŠ¶æ€:
  docker-compose -f docker-compose.simple.yml ps

æŸ¥çœ‹æ—¥å¿—:
  docker-compose -f docker-compose.simple.yml logs -f

åœæ­¢æœåŠ¡:
  docker-compose -f docker-compose.simple.yml down

é‡å¯æœåŠ¡:
  docker-compose -f docker-compose.simple.yml restart

é‡æ–°æ„å»º:
  docker-compose -f docker-compose.simple.yml up -d --build

========================================
è®¿é—®åœ°å€
========================================

ç®€å•éƒ¨ç½²:
  http://localhost:3000

å®Œæ•´éƒ¨ç½²:
  http://localhost (é€šè¿‡ Nginx)
  http://localhost:3000 (ç›´æ¥è®¿é—®)

å¥åº·æ£€æŸ¥:
  http://localhost:3000/api/health

========================================
æ•…éšœæ’æŸ¥
========================================

é—®é¢˜ 1: æ„å»ºå¤±è´¥
è§£å†³: docker-compose -f docker-compose.simple.yml build --no-cache

é—®é¢˜ 2: ç«¯å£è¢«å ç”¨
è§£å†³: ä¿®æ”¹ docker-compose.yml ä¸­çš„ç«¯å£
      ports:
        - "3001:3000"

é—®é¢˜ 3: æ— æ³•è®¿é—®
è§£å†³: 
  1. docker ps | grep videoconvert
  2. docker logs videoconvert-app
  3. curl http://localhost:3000/api/health

é—®é¢˜ 4: æƒé™é”™è¯¯
è§£å†³: chmod 777 uploads output temp logs

========================================
æ–‡ä»¶è¯´æ˜
========================================

Dockerfile.fixed
  - ç®€åŒ–ç‰ˆ Dockerfile
  - åŒ…å« FFmpeg
  - æ˜“äºæ„å»º
  - æ¨èä½¿ç”¨ â­â­â­â­â­

docker-compose.simple.yml
  - æœ€ç®€å•çš„é…ç½®
  - ä»…åŒ…å«åº”ç”¨
  - é€‚åˆå¼€å‘å’Œæµ‹è¯•
  - æ¨èæ–°æ‰‹ä½¿ç”¨ â­â­â­â­â­

docker-compose.full.yml
  - å®Œæ•´é…ç½®
  - åŒ…å«åº”ç”¨ã€Redisã€Nginx
  - é€‚åˆç”Ÿäº§ç¯å¢ƒ
  - æ¨èç”Ÿäº§ä½¿ç”¨ â­â­â­â­

nginx.simple.conf
  - ç®€åŒ–çš„ Nginx é…ç½®
  - åŒ…å«å¿…è¦çš„ä»£ç†è®¾ç½®
  - æ”¯æŒ FFmpeg.wasm

========================================
å¸¸è§æ“ä½œ
========================================

è¿›å…¥å®¹å™¨:
  docker exec -it videoconvert-app sh

æŸ¥çœ‹å®¹å™¨æ—¥å¿—:
  docker logs -f videoconvert-app

æ£€æŸ¥å¥åº·çŠ¶æ€:
  docker inspect videoconvert-app | grep Health

æ¸…ç†æ‰€æœ‰å®¹å™¨:
  docker-compose -f docker-compose.simple.yml down -v

åˆ é™¤é•œåƒ:
  docker rmi videoconvert:latest

æ¸…ç†ç³»ç»Ÿ:
  docker system prune -a

========================================
æ€§èƒ½ä¼˜åŒ–
========================================

1. ä½¿ç”¨ Redis ç¼“å­˜:
   docker-compose -f docker-compose.full.yml up -d

2. é™åˆ¶èµ„æº:
   åœ¨ docker-compose.yml ä¸­æ·»åŠ :
   deploy:
     resources:
       limits:
         cpus: '2'
         memory: 2G

3. å¯ç”¨æ—¥å¿—è½®è½¬:
   logging:
     driver: "json-file"
     options:
       max-size: "10m"
       max-file: "3"

========================================
å¤‡ä»½å’Œæ¢å¤
========================================

å¤‡ä»½æ•°æ®:
  tar -czf backup.tar.gz uploads/ output/

æ¢å¤æ•°æ®:
  tar -xzf backup.tar.gz

å¤‡ä»½ Redis:
  docker exec videoconvert-redis redis-cli SAVE
  docker cp videoconvert-redis:/data/dump.rdb ./backup.rdb

========================================
ç›‘æ§
========================================

æŸ¥çœ‹èµ„æºä½¿ç”¨:
  docker stats videoconvert-app

æŸ¥çœ‹å®¹å™¨è¿›ç¨‹:
  docker top videoconvert-app

æŸ¥çœ‹å®¹å™¨è¯¦æƒ…:
  docker inspect videoconvert-app

========================================
æ›´å¤šä¿¡æ¯
========================================

è¯¦ç»†æ–‡æ¡£:
  ğŸ“– DOCKER_éƒ¨ç½²æŒ‡å—.md
  ğŸ“– PRODUCTION_DEPLOYMENT.md
  ğŸ“– ç”Ÿäº§çº§SaaSå®Œæˆ.md

å¿«é€Ÿå¯åŠ¨:
  ğŸ“„ å¿«é€Ÿå¯åŠ¨æŒ‡å—.txt

éƒ¨ç½²è„šæœ¬:
  ğŸš€ ./docker-deploy.sh

========================================

æ¨èæµç¨‹:
1. è¿è¡Œ ./docker-deploy.sh
2. é€‰æ‹© "ç®€å•éƒ¨ç½²"
3. è®¿é—® http://localhost:3000
4. æµ‹è¯•åŠŸèƒ½
5. å¦‚éœ€ç”Ÿäº§éƒ¨ç½²ï¼Œé€‰æ‹© "å®Œæ•´éƒ¨ç½²"

========================================
